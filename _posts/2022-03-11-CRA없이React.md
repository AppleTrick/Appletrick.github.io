---
title: CRA (Create-React-App) ì—†ì´ ë¦¬ì•¡íŠ¸ ë§Œë“¤ì–´ë³´ê¸°
author:
  name: Changhee Park
  link: https://github.com/Appletrick
date: 2022-03-11 00:00:00 +0900
categories: [React]
description: CRA
tags: [react]
---

### package.json ì„¤ì¹˜

cra ì—†ì´ reactë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ í”„ë¡œì íŠ¸ì— nodeë¥¼ ì„¤ì¹˜í•´ì¤˜ì•¼ëœë‹¤.

í„°ë¯¸ë„ì— ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ ì…ë ¥

```bash
npm init -y
```

- -yëŠ” npm ì„¤ì¹˜ë¥¼ default ê°’ìœ¼ë¡œ í•´ì£¼ëŠ”ê²½ìš° ì¨ì¤€ë‹¤.
- ë””í…Œì¼í•œ ì„¸ë¶€ ì„¤ì •ì„ í•˜ë ¤ë©´ npm init ë§Œ ì¨ì£¼ë„ë¡ í•˜ì

---

### React ì„¤ì¹˜

reactë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ì„œ npmì—ì„œ react ì™€ react-dom ì„¤ì¹˜

```bash
npm install react react-dom
```

---

### babel ì„¤ì¹˜

ì›í™œí•œ react ì‚¬ìš©ì„ ìœ„í•œ babel ì„¤ì¹˜

```bash
npm install -D @babel/core @babel/preset-env @babel/preset-react
```

- @babel/core : ë°”ë²¨ì˜ ì½”ì–´
- @babel/preset-env : ES6ì½”ë“œë¥¼ ES5ë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§
- @babel/preset-react : ë¦¬ì•¡íŠ¸ JSXë¥¼ íŠ¸ëœìŠ¤íŒŒì¼ë§
- ë°”ë²¨ì€ ê°œë°œë•Œë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ëª…ë ¹ì–´ì— -Dë¥¼ ë¶™ì—¬ì¤Œìœ¼ë¡œ ì¨ package.jsonì—ì„œ dependenciesì— ë‹´ê¸°ì§€ ì•Šê³  devDependencies ë‹´ê¸°ê¸° ìœ„í•´ ì‚¬ìš©

---

### babel ì„¤ì •íŒŒì¼ .babelrc íŒŒì¼ì„ ìƒì„± ë° ë‚´ìš© ì…ë ¥

ë°”ë²¨ì˜ ì„¤ì •ê°’ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `.babelrc` íŒŒì¼ ìƒì„± (ë°”ë²¨ì˜ ì„¤ì •íŒŒì¼)

```js
{
    "presets": [
        "@babel/preset-env",
        "@babel/preset-react"
    ],

    "plugins": []
}
```

---

### webpack ì„¤ì¹˜

```bash
npm install -D webpack webpack-cli webpack-dev-server
```

- webpack : ì›¹íŒ©ì˜ ì½”ì–´ë¥¼ ì˜ë¯¸
- webpack-cli : ì›¹íŒ©ì„ ì»¤ë§¨ë“œë¼ì¸ì—ì„œ ì‚¬ìš©ê°€ëŠ¥ í•˜ê²Œí•¨
- webpack-dev-server : ì›¹íŒ©ì„ ë©”ëª¨ë¦¬ ìƒì— ë¹Œë“œí•˜ì—¬ ê°œë°œ ì„œë²„ë¥¼ êµ¬ë™

---

### webpackì˜ ë²ˆë“¤ë§ì— í•„ìš”í•œ loader ê´€ë ¨ ì„¤ì¹˜

```bash
npm install -D babel-loader style-loader css-loader file-loader html-loader
```

- babel-loader : JSX ë° ES6+ ë¬¸ë²•ì„ íŠ¸ëœìŠ¤íŒŒì¼ë§
- style-loader : ë³€í™˜ëœ CSS íŒŒì¼ì„Â `<style>`Â íƒœê·¸ë¡œ ê°ì‹¸ì„œ ì‚½ì…
- css-loader : CSS íŒŒì¼ì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë³€í™˜
- file-loader : ì´ë¯¸ì§€ ë° í°íŠ¸ ë“±ì˜ íŒŒì¼ ë¡œë”©
- html-loader : htmlì„ ì½ì„ ìˆ˜ ìˆìŒ

---

### webpackì— í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

```bash
npm install -D html-webpack-plugin clean-webpack-plugin
```

- html-webpack-plugin : HTML íŒŒì¼ì— ë²ˆë“¤ë§ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì‚½ì…í•´ì£¼ê³  ë²ˆë“¤ë§ëœ ê²°ê³¼ê°€ ì €ì¥ë˜ëŠ” í´ë”ì— ì˜®ê¹€.
- clean-webpack-plugin : ë²ˆë“¤ë§ì„ í•  ë•Œë§ˆë‹¤ ì´ì „ ë²ˆë“¤ë§ ê²°ê³¼ë¥¼ ì œê±°.

- mini-css-extract-plugin : css íŒŒì¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸.

<aside>
â˜ğŸ» "style-loader"ì™€ MiniCssExtractPlugin.loaderë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì•ˆë©ë‹ˆë‹¤

</aside>

---

### webpack ì„¤ì •íŒŒì¼ webpack.config.js íŒŒì¼ ìƒì„± ë° ë‚´ìš©ì…ë ¥

```js
const path = require("path");

module.exports = {
  mode: "development",
  entry: "./index.js",
  resolve: {
    extensions: [".js", ".jsx"],
  },
  output: {
    //path: path.resolve(__dirname, './dist'),
    filename: "bundle.[hash].js",
  },
};
```

- require(â€™pathâ€™) : ë…¸ë“œì—ì„œ ì§€ì›í•´ì£¼ëŠ” ê²½ë¡œ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¨ë‹¤.
- mode : ì›¹í™ì˜ í˜„ì¬ ëª¨ë“œë¥¼ ì„¤ì • development / production / none ì˜ 3ê°€ì§€ ëª¨ë“œê°€ ìˆë‹¤.
- entry : ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë””ì—ì„œ ì‹¤í–‰í•˜ëŠ” ì§€ë¥¼ ì„¤ì •í•œë‹¤.
- resolve : ì›¹í™ì—ì„œ íŒŒì¼ì„ ì²˜ë¦¬í• ë•Œ í™•ì¥ìë¥¼ ìƒëµí•´ë„ ì¸ì‹í•˜ê²Œ ë§Œë“¤ìˆ˜ ìˆê²Œ í•´ì¤Œ
- output.path : ê²°ê³¼ë¬¼ì„ ì¶œë ¥í• ë•Œ ë‚˜ì˜¤ê²Œí•˜ëŠ” ê³³ì„ ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆìŒ
- output.filename : íŒŒì¼ì´ë¦„ì„ ì„¤ì • í•  ìˆ˜ ìˆìŒ [hash]ëŠ” ì»´íŒŒì¼í• ë•Œ ì‚¬ìš©í•œ hashë¥¼ ì‚¬ìš©í•˜ê²Œ ë¨

```js
devtool: 'eval-cheap-source-map',
```

- devtool : source-mapì„ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ë²ˆë“¤ë§ëœ íŒŒì¼ì—ì„œ ì–´ëŠ ë¶€ë¶„ì— ì—ëŸ¬ê°€ ë‚¬ëŠ”ì§€ë¥¼ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë„êµ¬

```js
const port = process.env.PORT || 3000;

----

devServer: {
        host: 'localhost',
        port: port,
        hot : true,
        open: true,
      },
```

- process.env.PORT || 3000 : í¬íŠ¸ë²ˆí˜¸ ì„¤ì •
- devServer : webpack-dev-serverì˜ ì˜µì…˜ ì„¤ì •
- overlayÂ : ì—ëŸ¬ ë°œìƒ ì‹œ ë¸Œë¼ìš°ì €ì— ë‚´ìš©ì„ ë„ìš¸ì§€ ì„¤ì •
- hotÂ : ëª¨ë“ˆì˜ ë³€í™”ë§Œ ìë™ìœ¼ë¡œ ë¡œë“œí•˜ëŠ” HMR(Hot Module Replacement) ê¸°ëŠ¥ í™œì„±í™” ì„¤ì •

```js
module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        exclude: '/node_modules/',
        loader: 'babel-loader',
      },
      {
        test: /\.css$/,
        // use: ['style-loader', 'css-loader'],
        use: [MiniCssExtractPlugin.loader, 'css-loader'],
      },
      {
        test: /\.(jpeg|jpg)$/,
        loader: 'file-loader',
        options: {
          name: '[name].[ext]',
        },
      },
    ],
  },
```

ëª¨ë“ˆë¶€ë¶„ ì¶”ê°€

- modules, rules : ëª¨ë“ˆì— ì ìš©í•  ë¡œë”ë“¤ê³¼ ê·¸ ì˜µì…˜ë“¤ì„ ì„¤ì •
- testÂ : ì–´ë–¤ íŒŒì¼ì— ì ìš©í• ì§€ í™•ì¥ì ì‘ì„±
- excludeÂ : ë¡œë”ì—ì„œ ì œì™¸í•  íŒŒì¼ ì„¤ì •
- loaderÂ : ì ìš©í•  ë¡œë”ê°€ 1ê°œë¼ë©´ loaderë¡œ ì„¤ì •
- useÂ : ì ìš©í•  ë¡œë”ê°€ 2ê°œ ì´ìƒì´ë©´ use ë°°ì—´ë¡œ ì„¤ì •

### í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€ ì½”ë“œ

```js
// ì„¤ì¹˜ëœ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.
const HtmlWebpackPlugin = require('html-webpack-plugin');
//const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const {CleanWebpackPlugin} = require('clean-webpack-plugin');

-----

plugins: [
        new CleanWebpackPlugin(),
        new HtmlWebpackPlugin({
          template: './public/index.html',
        }),
        // new MiniCssExtractPlugin({ filename: 'app.css' }),
        // "style-loader"ì™€ MiniCssExtractPlugin.loaderë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì•ˆë©ë‹ˆë‹¤
      ],
```

### ëª¨ë“œì½”ë“œ

```js
const path = require("path");
// ì„¤ì¹˜ëœ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.
const HtmlWebpackPlugin = require("html-webpack-plugin");
//const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const { CleanWebpackPlugin } = require("clean-webpack-plugin");

// ê¸°ë³¸ í¬íŠ¸ ì„¤ì •
const port = process.env.PORT || 3000;

module.exports = {
  mode: "development",
  entry: "./index.js",
  resolve: {
    extensions: [".js", ".jsx"],
  },
  output: {
    path: path.resolve(__dirname, "./dist"),
    filename: "bundle.[hash].js",
  },
  devtool: "eval-cheap-source-map",
  devServer: {
    host: "localhost",
    port: port,
    hot: true,
    open: true,
  },
  module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        exclude: "/node_modules/",
        loader: "babel-loader",
      },
      {
        test: /\.css$/,
        use: ["style-loader", "css-loader"],
        // use: [MiniCssExtractPlugin.loader, 'css-loader'],
      },
      {
        test: /\.(jpeg|jpg|png)$/,
        loader: "file-loader",
        options: {
          name: "[name].[ext]",
        },
      },
    ],
  },

  // ì¶”ê°€ëœ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì •í•´ì£¼ëŠ”ê³³
  plugins: [
    new CleanWebpackPlugin(),
    new HtmlWebpackPlugin({
      template: "./public/index.html",
    }),
    // new MiniCssExtractPlugin({ filename: 'app.css' }),
    // "style-loader"ì™€ MiniCssExtractPlugin.loaderë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì•ˆë©ë‹ˆë‹¤
  ],
};
```

---

### package.json script ì‘ì„±

```json
"scripts": {
    "dev": "webpack-dev-server --progress",
    "build": "webpack"
  }
```

---

### srcì— íŒŒì¼ ìƒì„± App.jsx

```jsx
import React from "react";

const App = () => {
  return (
    <>
      <h1>hello</h1>
    </>
  );
};

export default App;
```

---

### rootì— index.js íŒŒì¼ ìƒì„±

```jsx
import React from "react";
import ReactDom from "react-dom";
import App from "./src/App";

ReactDom.render(<App />, document.getElementById("root"));
```

### ì‹¤í–‰

```bash
npm run dev
```
